<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="tyylit.css">
    <meta name="theme-color" content="#ffffff">
    <link rel="manifest" href="/manifest.json">
    <title>Nissan almera kulut</title>
  </head>
  <body id="runko">
    <div id="ylalaatikko">
      <a href="/ulos">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="91.839px" height="122.88px" viewBox="0 0 91.839 122.88" style="height: 40px;fill: var(--teema);width: 40px;">
        <g><path d="M81.75,64.617H41.365c-1.738,0-3.147-1.423-3.147-3.178c0-1.756,1.409-3.179,3.147-3.179h40.383L68.559,43.155 c-1.146-1.31-1.025-3.311,0.271-4.469c1.297-1.159,3.278-1.037,4.425,0.273l17.798,20.383c1.065,1.216,1.037,3.029-0.011,4.21 L73.254,83.92c-1.146,1.311-3.128,1.433-4.425,0.273c-1.296-1.158-1.417-3.16-0.271-4.47L81.75,64.617L81.75,64.617z M70.841,99.629c0-1.756,1.423-3.179,3.178-3.179c1.756,0,3.179,1.423,3.179,3.179v14.242c0,2.475-1.017,4.729-2.648,6.36 c-1.633,1.632-3.887,2.648-6.36,2.648H9.009c-2.475,0-4.73-1.014-6.363-2.646C1.016,118.603,0,116.352,0,113.871V9.009 c0-2.48,1.013-4.733,2.644-6.365C4.275,1.013,6.528,0,9.009,0h59.18c2.479,0,4.731,1.016,6.362,2.646 c1.633,1.633,2.646,3.889,2.646,6.363V23.25c0,1.755-1.423,3.178-3.179,3.178c-1.755,0-3.178-1.423-3.178-3.178V9.009 c0-0.722-0.301-1.385-0.785-1.869c-0.482-0.482-1.144-0.783-1.867-0.783H9.009c-0.726,0-1.389,0.3-1.87,0.782 C6.656,7.62,6.357,8.283,6.357,9.009v104.862c0,0.724,0.301,1.385,0.783,1.867c0.484,0.484,1.147,0.785,1.869,0.785h59.18 c0.72,0,1.381-0.302,1.865-0.786c0.485-0.484,0.787-1.146,0.787-1.866V99.629L70.841,99.629z"></path></g></svg>
      </a>
      <h1>Nissan</h1>
    </div>
    <div id="ilmoitusBoksi" class="ilmoitus">
      <h2>Tallennettu</h2>
      <div id="poistonappi" onclick="ilmoitusSulku()"><div class="raksi"></div></div>
    </div>
    <form action="" method="POST" autocomplete="off">
      <div id="tieto-boksi" style="flex-direction: column-reverse;">
        <div class="tiedot" autocomplete="off">
          <label for="tieto" id="tietoTeksti">Polttoaineen määrä</label>
          <input type="text" name="tieto" pattern="\d+(,\d{0,2})?" id="tieto" required="required"></input>
        </div>
        <div class="tiedot" autocomplete="off">
          <label for="hinta" id="tietoNumero">Hinta</label>
          <input type="text" pattern="\d+(,\d{2})?" id="hinta" name="hinta" required="required"/>
        </div>
      </div>
      <div class="tiedot" autocomplete="off">
        <label for="paivamaara">Päivämäärä</label>
        <input type="date" id="paivamaara" name="paivamaara" required="required"/>
      </div>
      <div id="keskikulutus" class="kaytossa">
        <div class="keskikulutus-nappi">
          <input type="checkbox" id="Keskikulutus" name="keskikulutus" value="Keskikulutus">
          <label for="keskikulutus">Keskikulutus</label>
        </div>
        <div id="keskikulutusKm" class="">
          <label for="kilometrilukema">Kilometrilukema</label>
          <input type="text" id="Kilometrilukema" pattern="\d+(,\d{0,2})?" name="kilometrilukema">
        </div>
      </div>
      <div onclick="valitsin()" class="tiedot tiedot-tyyppi">
        <div>
          <input type="radio" id="polttoaine" name="tyyppi" value="Polttoaine" checked>
          <label for="polttoaine">Polttoaine</label>
        </div>
        <div>
          <input type="radio" id="tuote" name="tyyppi" value="Tarvikkeet">
          <label for="tuote">Tarvikkeet</label>
        </div>
        <div>
          <input type="radio" id="palvelu" name="tyyppi" value="Palvelut">
          <label for="palvelu">Palvelu</label>
        </div>
        <div>
          <input type="radio" id="huolto" name="tyyppi" value="Huollot">
          <label for="huolto">Huolto</label>
        </div>
      </div>
      <button type="submit">Tallenna</button>
    </form>
    <script>
      var metaThemeColor = document.querySelector("meta[name=theme-color]");
      var p = new Date();
      Number.prototype.pad = function(size) {
        var s = String(this);
        while (s.length < (size || 2)) {s = "0" + s;}
        return s;
      }
      kohde("paivamaara").defaultValue = p.getFullYear().toString() + "-" + (p.getMonth() + 1).pad(2).toString() + "-" + p.getDate().pad(2).toString();
      
      function ilmoitusSulku() {
        kohde("ilmoitusBoksi").classList.remove("ilmoitus-tallennettu");
        kohde("runko").classList.remove("ilmoitus-tallennettu");
        metaThemeColor.setAttribute('content', '#ffffff');
      }

      function kohde(kohde) {
        return document.getElementById(kohde);
      }

      function valitsin() {
        if(kohde('polttoaine').checked) {
          kohde("tietoTeksti").innerHTML = "Polttoaineen määrä";
          kohde("tieto").pattern = "\\d+(,\\d{0,2})?";
          kohde("Keskikulutus").value = "Keskikulutus";
          kohde("keskikulutus").classList.add("kaytossa");
          kohde("tieto-boksi").style.flexDirection = "column-reverse";
        } else if (kohde('tuote').checked) {
          kohde("tietoTeksti").innerHTML = "Tuotteen tiedot";
        }
        else if (kohde('palvelu').checked) {
          kohde("tietoTeksti").innerHTML = "Palvelun tiedot";
        }
        else if (kohde('huolto').checked) {
          kohde("tietoTeksti").innerHTML = "Huollon tiedot";
          kohde("tietoNumero").innerHTML = "Kilometrilukema";
        }
        if (!kohde('huolto').checked) {
          kohde("tietoNumero").innerHTML = "Hinta";
        }
        if (!kohde('polttoaine').checked) {
          kohde("tieto").pattern = "^[a-zA-Z-äöåÄÖÅ0-9 ]+$";
          kohde("Keskikulutus").value = null;
          kohde("Kilometrilukema").value = null;
          kohde("keskikulutus").classList.remove("kaytossa");
          kohde("tieto-boksi").style.flexDirection = "column";
        }
      }
      function keskiKulutus() {
        if (kohde("keskikulutus").classList.contains("kaytossa")) {
          if (kohde("Keskikulutus").checked) {
            kohde("keskikulutusKm").classList.add("keskikulutus");
            kohde("Kilometrilukema").pattern = "\\d+(,\\d{0,2})?";
          } else {
            kohde("keskikulutusKm").classList.remove("keskikulutus");
            kohde("Kilometrilukema").pattern = "";
          }
        }
      }
      kohde("Keskikulutus").addEventListener("click", keskiKulutus);

      var tallennus = new URL(location);;
      if (tallennus.searchParams.get("tila") == "tallennettu") {
        metaThemeColor.setAttribute("content", "#41bdc3");
        kohde("ilmoitusBoksi").classList.add("ilmoitus-tallennettu");
        kohde("runko").classList.add("ilmoitus-tallennettu");
        tallennus.searchParams.delete('tila');
        history.replaceState(null, null, tallennus)
      }
    </script>
  </body>
</html>
